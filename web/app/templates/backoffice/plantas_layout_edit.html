{% extends "backoffice/_layout.html" %}

{% block content %}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Mapas<i class="fa fa-long-arrow-right  fa-fw" aria-hidden="true"></i>Plantas->Layout->Edição</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>

<div class="module-content">
    <form method="post" id="formPlantaLayout" name="formPlantaLayout">
        {% with messages = get_flashed_messages() %}
           {% if messages %}
           <div class="alert alert-success alert-dismissible" role="alert">
              <a class="close" data-dismiss="alert">×</a>
              {% for message in messages %}
                 {{ message }}
              {% endfor %}
           </div>
           {% endif %}
        {% endwith %}

        {% if error %}
           <div class="alert alert-danger alert-dismissible" role="alert">
              <a class="close" data-dismiss="alert">×</a>
              <h4 class="alert-heading">Erros:</h4>
              <ul>
             {% for field in form if field.widget.input_type != 'hidden' %}
               {% if field.errors %}
                  <li><strong>{{ field.label.text }}</strong>:{% for error in field.errors %} {{ error }}.{% endfor %}</li>
               {% endif %}
             {% endfor %}
              </ul>
           </div>
        {% endif %}

        {{ form.csrf_token }}

        <div class="row" style="padding-top: 20px">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-heading">Planta</div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-2">
                                <label>Id</label>
                                <div>{{ planta.id }}</div>
                            </div>
                            <div class="col-md-3">
                                <label>Código</label>
                                <div>{{ planta.codigo }}</div>
                            </div>
                            <div class="col-md-6">
                                <label>Nome</label>
                                <div>{{ planta.nome }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <fieldset>
            <!--
            <legend>Edição de Definição de Layout de Planta</legend>
            -->
            <input type="hidden" id="planta_id" name="planta_id" value="{{ form.planta_id.data }}" />

            <div class="row">
                <div class="col-md-3">
                    <label>Formato</label>
                    <select name="formato" id="formato" class="form-control input-block-level">
                        <option value=""></option>
                        {% set formats = ['A4', 'A3', 'A2','A1','A0'] %}
                        {% for f in formats %}
                        <option value="{{ f }}" {% if f == form.formato.data %}selected{% endif %}>{{ f }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <label>Orientação</label>
                    <select name="orientacao" id="orientacao" class="form-control input-block-level">
                        <option value=""></option>
                        {% set orientations = ['Retrato', 'Paisagem'] %}
                        {% for o in orientations %}
                        <option value="{{ o }}" {% if o == form.orientacao.data %}selected{% endif %}>{{ o }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="row">
                 <div class="col-md-12{% if form.configuracao.errors %} has-error{% endif %}">
                    <div style="height: 400px">
                        <label for="configuracao">Configuração</label>
                        <textarea name="configuracao" id="configuracao" class="form-control input-block-level" rows="15">{{ form.configuracao.data or '' }}</textarea>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12" style="text-align: right">
                    <button type="button" class="btn btn-default" onclick="location.href='{{ url_for('backoffice.plantas_edit', id=form.planta_id.data) }}'" >Voltar</button>
                    <button type="submit" class="btn btn-primary">Gravar</button>
                </div>
            </div>

            <br />
        </fieldset>

    </form>
</div>
{% endblock %}

{% block post_script %}
<script type="text/javascript">
    $(function () {

      var myCodeMirror = CodeMirror.fromTextArea(document.getElementById('configuracao'), {
        //mode: "javascript",
        lineNumbers: true,
        matchBrackets: true,
        continueComments: "Enter",
        extraKeys: {"Ctrl-Q": "toggleComment"}
      });

    });
</script>
{% endblock %}
